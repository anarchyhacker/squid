# Double Squid Proxy

Squid — программный пакет, реализующий функцию кэширующего прокси-сервера для протоколов HTTP, FTP, Gopher и (в случае соответствующих настроек) HTTPS.

В этом мануале подробно описано, как сделать двойные прокси на базе Linux пакета Squid. Полезно будет тем, кто не имеет возможности подключаться напрямую к определённым IP адресам, открывать определённые страницы/сайты и тем у кто работает с большим количеством компьютеров, на которых есть необходимость менять прокси часто. Специфика работы будет заключаться в том, что ваши устройства будут подключены к определённому серверу(прокси), а сервер будет прогонять HTTP/HTTPS трафик через ваши прокси.

**Примечание:** В данном мануале предполагается, что вы имеете хотябы минимальный опыт работы с операционными системами на базе Linux.

### Покупка и настройка VPS/VDS сервера

Чтобы успешно привести в работоспособность пакет Squid, следует выполнить несколько шагов и пожалуй, первым из них - аренда и настройка VPS сервера. Обычно Squid разворачивают на Linux подобных системах и в данном мануале будет использоваться сервер на опреационной системе Ubuntu 22 арендованный на облачном сервисе [ishosting.com](https://ishosting.com/) в качестве примера. Также, можно использовать другие облачные сервисы и другие операционные системы с ядром Linux. После того, как Вы арендовали свой сервер на базе Linux, Вам понадобится к нему подключиться используя SSH. Есть много возможных способов подключиться к VPS, как с операционной системы Windows, так и с операционных систем на базе Linux. 

1) Заходим в свой зарегистрированный аккаунт на [ishosting.com](https://ishosting.com/) и переходим во вкладку Virtual Servers и арендуем новый сервер. Достаточно будет дешёвого сервера на 2GB RAM, страну подбирайте под себя, далее можно оставить базовую конфигурацию.
2) Ждём пока пройдёт инициализация сервера и он будет готов, а далее подключаемся к нему используя SSH.
   Новая операционная система Windows 11 уже имеет поддержку SSH, следует только зайти в PowerShell и написать соответствующую команду:
   ```
   ssh <имя пользователя>@<ip адрес>
   ```
   **Примечание:** В свободном доступе есть много информации о том, как настроить другие клиенты SSH(WSL, PuTTY и другие).
3) Чтобы не возникало никаких ошибок при развёртывании Squid на Вашем сервере, следует обновить все репозитории и пакеты системы, используя команду:
   ```
   apt update & apt upgrade
   ```
4) Для некоторых дополнительных возможностей пакета Squid, таких как защита ваших прокси паролем, используется пакет apache2-utils:
   ```
   apt install apache2-utils
   ```
5) Устанавливаем сам пакет Squid:
   ```
   apt install squid
   ```

На данном этапе сервер полностью настроен под использование Squid, далее Вам следует настроить сам пакет Squid.

### Настройка Squid

